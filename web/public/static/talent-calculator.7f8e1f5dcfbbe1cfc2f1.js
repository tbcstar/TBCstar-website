(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{1083:function(t,e,i){},1089:function(t,e,i){"use strict";i.r(e);var s=i(9),a=i.n(s);i(1083);function l(t){this.elem=t,this.elem.talentCalculator=this,this.classes=t.querySelectorAll(".TalentCalculator-class"),this.specs=t.querySelectorAll(".TalentCalculator-spec"),this.shares=t.querySelectorAll(".TalentCalculator-share"),this.resets=t.querySelectorAll(".TalentCalculator-reset"),this.tiers=t.querySelectorAll(".TalentCalculator-tier"),this.talents=this.tiers.map((function(t){return t.querySelectorAll(".TalentCalculator-talent")})),this.petSpecOptions=t.querySelectorAll(".TalentCalculator-petSpecOption"),this.petSpecs=t.querySelectorAll(".TalentCalculator-petSpecAbilities"),this.init()}Object.assign(l,{init:function(){a()(".TalentCalculator",l.create)},create:function(t){return new l(t)}}),l.prototype={init:function(){this.shares.map(this.listen.bind(this,this.share)),this.resets.map(this.listen.bind(this,this.reset)),this.tiers.map(this.listenTier.bind(this)),this.classes.map(this.listenClass.bind(this)),this.classes.map(this.listen.bind(this,this.save)),this.specs.map(this.listen.bind(this,this.save)),this.petSpecOptions.map(this.linkPetSpecs.bind(this)),this.petSpecs.map(this.listenPetSpec.bind(this)),this.load()},hideIntro:function(){this.elem.querySelectorAll(".TalentCalculator-intro").map((function(t){t.classList.add("hide")}))},setSubtitle:function(t){this.elem.querySelector(".TalentCalculator-subtitle").textContent=t},listen:function(t,e){e.addEventListener("click",t.bind(this,e))},listenClass:function(t){var e=this.elem.querySelector('.Tab[name="'.concat(t.data("tab"),'"] .TalentCalculator-specs'));t.addEventListener("click",this.handleClassClick.bind(this,e,!0))},listenTier:function(t,e){var i=this,s=this.talents[e];s.map((function(e){e.addEventListener("click",i.toggleTier.bind(i,t,s)),e.querySelector(".TalentCalculator-select").addEventListener("click",i.select.bind(i,t,s,e)),e.querySelector(".TalentCalculator-unselect").addEventListener("click",i.unselect.bind(i,t,s,e)),e.querySelector(".Talent-checkboxInput").addEventListener("click",i.handleTalentCheckboxClick.bind(i,t,s,e))}))},listenPetSpec:function(t){t.querySelector(".TalentCalculator-select").addEventListener("click",this.selectPetSpec.bind(this,t)),t.querySelector(".TalentCalculator-unselect").addEventListener("click",this.unselectPetSpec.bind(this,t)),t.querySelector(".TalentCalculator-petSpecAbilitiesClose").addEventListener("click",(function(e){t.petSpecTabLink.click()}))},linkPetSpecs:function(t){var e=t.querySelector(".TalentCalculator-petSpecLink"),i=document.querySelector(".TalentCalculator-petSpecAbilities"+e.attributeSelector("data-tab"));t.petSpecTab=i,i.petSpecTabLink=e,e.petSpecOption=t},share:function(t){this.save(),window.prompt("Shareable Permalink",location.href)},reset:function(t){var e=this.removeSelection.bind(this);this.talents.map((function(t){t.map(e)})),this.tiers.map(e),this.petSpecs.map(this.unselectPetSpec.bind(this)),this.save()},handleTalentCheckboxClick:function(t,e,i,s){s.stopPropagation(),s.currentTarget.checked?this.selectTalent(t,e,i):this.unselectTalent(t,e,i)},handleClassClick:function(t,e,i){var s=i.currentTarget.data("subtitle");this.setSubtitle(s),this.hideIntro(),this.syncHeightUpdate(t,e)},syncHeightUpdate:function(t,e){var i=t.syncHeight;i&&(e?setTimeout(i.update.bind(i),1):i.reset())},toggleTier:function(t,e){t.classList.toggle("TalentCalculator-tier--active"),this.syncHeightUpdate(t,t.classList.contains("TalentCalculator-tier--active")),e.map(this.toggleTalent.bind(this))},collapseTier:function(t,e){t.classList.remove("TalentCalculator-tier--active"),this.syncHeightUpdate(t,t.classList.contains("TalentCalculator-tier--active")),e.map((function(t){t.Talent.collapse()}))},toggleTalent:function(t){t.Talent.isCollapsed?t.Talent.expand():t.Talent.collapse()},selectTalent:function(t,e,i){this.select(t,e,i)},select:function(t,e,i){e.map(this.removeSelection.bind(this)),this.addSelection(i),this.addSelection(t),this.save()},selectPetSpec:function(t,e){this.petSpecOptions.map((function(t){t.classList.remove("is-active"),t.petSpecTab.classList.remove("is-active")})),t.classList.add("is-active"),t.petSpecTabLink.petSpecOption.classList.add("is-active"),this.save()},addSelection:function(t){t.Talent?t.Talent.select():t.classList.add("is-selected")},unselectTalent:function(t,e,i){this.unselect(t,e,i)},unselect:function(t,e){e.map(this.removeSelection.bind(this)),this.removeSelection(t),this.save()},unselectPetSpec:function(t){t.classList.remove("is-active"),t.petSpecTabLink.petSpecOption.classList.remove("is-active"),this.save()},removeSelection:function(t){t.Talent&&t.Talent.unselect(),t.classList.remove("is-selected")},save:function(){var t=this;setTimeout((function(){var e="#"+t.export();location.replace(location.href.replace(/(#.*)?$/,e))}),100)},load:function(){var t=this;setTimeout((function(){t.import(location.hash.substr(1))}),100)},export:function(){var t,e,i,s,a,l,c,n,o=[];if((e=this.classes.match(".is-selected"))&&(t=e.data("tab"),(s=this.specs.match('[data-tab^="'+t+'/"].is-selected'))?(i=s.data("tab"),a=this.elem.querySelector('.Tab[name="'.concat(i,'"]')),o.push(i)):o.push(t)),a){(l=a.querySelectorAll(".TalentCalculator-tier").map((function(t){var e=t.querySelectorAll(".TalentCalculator-talent"),i=0;return e.map((function(t,e){t.classList.contains("is-selected")&&(i=e+1)})),i})).join("").replace(/0+$/,""))&&o.push("talents="+l)}return(n=this.petSpecOptions.match(".is-active"))&&(c=n.querySelector(".TalentCalculator-petSpecLink").data("tab"),o.push("pet="+c)),o.join("/")},import:function(t){var e,i,s,a,l,c,n,o,r=this,h=t.split("/"),u=h.shift(),p=h.shift();if(u&&(e=this.classes.match('[data-tab="'+u+'"]'))&&e.click(),p&&(i=this.specs.match('[data-tab="'+u+"/"+p+'"]'))&&(i.click(),s=this.elem.querySelector('.Tab[name="'.concat(i.data("tab"),'"]'))),s){for(l=s.querySelectorAll(".TalentCalculator-tier");c=h.shift();)if(n=c.split("=").shift().toLowerCase(),o=c.split("=").slice(1).join("="),n&&o)switch(n){case"talents":o.replace(/\D/g,"").split("").map((function(t,e){var i=~~t,s=l[e];if(i>0&&s){var a=s.querySelectorAll(".TalentCalculator-talent"),c=a[i-1];c?r.select(s,a,c):r.syncHeightUpdate(s)}}));break;case"pet":(a=this.petSpecs.match('[data-tab="'+o+'"]'))&&r.selectPetSpec(a,!1)}this.save()}}},e.default=l}}]);